const baseAPI = 'https://altscans-api.netlify.app/api';

const handleSeriesCover = (chapterNo) => {
    window.location.href = `/reader.html?chapter=${chapterNo}&series=${seriesName}&id=${mangaId}`;
};

class LatestReleases{constructor(){this.initializeComponents(),this.attachEventListeners()}initializeComponents(){this.starRatings=document.querySelectorAll(".star-rating"),this.likeButtons=document.querySelectorAll(".like-button"),this.coverUploads=document.querySelectorAll(".cover-upload"),this.chapterButtons=document.querySelectorAll(".chapter-btn, .chapter-btn-highlight")}attachEventListeners(){this.initializeStarRatings(),this.initializeLikeButtons(),this.initializeCoverUploads(),this.initializeChapterButtons()}initializeStarRatings(){this.starRatings.forEach(t=>{const e=t.querySelectorAll(".star");e.forEach((t,s)=>{t.addEventListener("click",()=>this.updateStarRating(e,s)),t.addEventListener("keypress",t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),this.updateStarRating(e,s))})})})}updateStarRating(t,e){t.forEach((t,s)=>{t.dataset.active=(s<=e).toString(),t.setAttribute("aria-pressed",(s<=e).toString())})}initializeLikeButtons(){this.likeButtons.forEach(t=>{t.addEventListener("click",()=>this.toggleLike(t)),t.addEventListener("keypress",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.toggleLike(t))})})}toggleLike(t){const e="true"===t.dataset.liked;t.dataset.liked=(!e).toString(),t.setAttribute("aria-pressed",(!e).toString()),t.innerHTML=e?"♡":"♥"}initializeCoverUploads(){this.coverUploads.forEach(t=>{t.querySelector("input[type=file]").addEventListener("change",e=>this.handleCoverUpload(e,t))})}handleCoverUpload(t,e){const s=t.target.files[0];if(s&&s.type.startsWith("image/")){const t=new FileReader;t.onload=t=>{e.style.backgroundImage=`url(${t.target.result})`,e.style.backgroundSize="cover",e.style.backgroundPosition="center";const s=e.querySelector(".cover-upload-icon");s&&(s.style.display="none")},t.readAsDataURL(s)}}initializeChapterButtons(){this.chapterButtons.forEach(t=>{t.addEventListener("click",()=>this.handleChapterSelection(t))})}handleChapterSelection(t){console.log(`Reading ${t.textContent}`)}}document.addEventListener("DOMContentLoaded",()=>{new LatestReleases});

function readChapter(manga, nick, chapterNo){
  window.location.href = `/reader.html?chapter=${chapterNo}&series=${nick}&id=${manga}`;
}